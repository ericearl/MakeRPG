# MakeRPG YAML lookup language
# dice:
#     '[0-9]+d[0-9]+\ *(>|<)*'
# lookup:
#     '<([\w\ \.\-])+>' = ordered-lookup
#     '<.>' = parent-lookup
#     '<<(stat|skill)>>' = nested-lookup
# math:
#     '\ \+\ ' = add
#     '\ \-\ ' = subtract
#     '\ \*\ ' = multiply
#     '\ \/\ ' = divide
# functions( lookups, logicals, and/or math ) = function
#     '\((\ lookup,*)+\ \)' = logical functions:
#         'min\((\ lookup,*)+\ \)' = minimum of csv's
#         'max\((\ lookup,*)+\ \)' = maximum of csv's
#     '\(\ lookup\ math\ lookup\ \)' = math functions:
#         'exact\(\ lookup\ \)' = keep as fractional if fractional
#         'round\(\ lookup\ \)' = round regularly if fractional
#         'roundup\(\ lookup\ \)' = round up if fractional
#         'rounddown\(\ lookup\ \)' = round down if fractional
#     '\ \(\ .+\ \)\ ' = inner evaluations
#     '\ .+\ <\ .+\ ' = less than
#     '\ .+\ >\ .+\ ' = greater than
#     'AND'
#     'OR'
#     '.+\ WHERE\ .+\ IS\ .+'
# ORDER OF OPERATIONS
# 1. options:
# 2. defaults:
# 3. stats:
# 4. parentheses
# . multiplication
# . division
# . addition
# . subtraction
# . ordered-lookup
defaults:
    stats:
        set: options|Random
    skills:
        spend: points|Pickup + points|BP

options:
    Random:
        defaults:
            stats:
                set: 1d10 > 2 # if it's less than 3 it is re-rolled

points:
    Pickup:
        set: stats|REF + stats|INT

stats:
    Humanity:
        set: stats|EMPATHY * 10
    LEAP:
        set: exact( stats|MA / 4 )
    STRENGTH:
        set: ( 3d6 * 100 ) + 1d100
    REPUTATION:
        set: rounddown( ( stats|STRENGTH + stats|INTELLIGENCE ) / 3 )

skills:
    Animal Lore:
        set: options|Universal # because it's a universal skill
        purchase: 1d10 + stat
        stat: min( stats|INTELLIGENCE , stats|WISDOM , stats|CHARISMA )
        prereq: ( skills|Animal Empathy < 50 ) AND ( skills|Animal Lore > 50 )

traits:
    smart: stats|INTELLIGENCE + 2
